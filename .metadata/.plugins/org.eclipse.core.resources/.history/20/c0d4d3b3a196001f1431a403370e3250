package com.service;

import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import com.entity.Distance;
import com.entity.Location;
import com.repository.DistanceRepository;

@Service
public class DistanceService {
	
	@Autowired
	DistanceRepository distanceRepository;
	
	public List<Distance> getDistancesFromLocation(Location location) {
        return distanceRepository.findByFromLocation(location);
    }

    public Distance saveDistance(Distance distance) {
        return distanceRepository.save(distance);
    }
    
	
	  public List<Distance> getAllDistances() {
	  
	  return distanceRepository.findAll();
	  
	  }
	  
	  public double getDistance(Long fromId, Long toId) {
	        Distance distance = distanceRepository.findByFromLocationIdAndToLocationId(fromId, toId);
	        
	        if (distance != null) {
	            return distance.getDistance();
	        } else {
	        	//return 0.0;
	            throw new RuntimeException("Distance not found between locations");
	        }
			/*
			 * if(distance == null)
			 * distance=distanceRepository.findByFromLocationIdAndToLocationId(toId,
			 * fromId); return (distance != null) ? distance.getDistance() : -1; // Return
			 * -1 if no distance found
			 */	    }
	 
}
